"use client";

import { Icon } from "@/components/icon";
import { Dialog, DialogContent, DialogTrigger } from "@/components/ui/dialog";
import { api } from "@/convex/_generated/api";
import { useMutation, useQuery } from "convex/react";
import { useRouter } from "next/navigation";
import { useState } from "react";
import { toast } from "sonner";
import { Skeleton } from "@/components/ui/skeleton";
import { useTemplateDialog } from "@/hooks/use-template-dialog";
import { Id } from "@/convex/_generated/dataModel";
import { Button } from "@/components/ui/button";
import { useSidebarSheet } from "@/hooks/use-sidebar-sheet";
import { ScrollArea, ScrollBar } from "@/components/ui/scroll-area";
import { Tooltip, TooltipTrigger, TooltipContent } from "@/components/ui/tooltip";

import { useRoom } from "@/liveblocks.config";
import * as Y from "yjs";
import LiveblocksProvider from "@liveblocks/yjs";
import { useEditor } from "@/hooks/use-editor";
import { PartialBlock } from "@blocknote/core";

interface TemplateItemProps {
  name: string;
  icon: string;
  content?: string;
  onClick: (
    event: React.MouseEvent<HTMLButtonElement, MouseEvent>,
    template: string,
    content?: string,
  ) => void;
  onRemove?: (event: React.MouseEvent<HTMLButtonElement, MouseEvent>, template: string) => void;
}

const TemplateItem = ({ name, icon, content, onClick, onRemove }: TemplateItemProps) => {
  return (
    <div className="relative w-fit h-fit p-1">
      <Tooltip>
        <TooltipTrigger asChild>
          <button
            className="w-[80px] h-[80px] md:w-[100px] md:h-[100px] rounded-lg border border-gray-200 dark:border-gray-800 flex flex-col items-center justify-center transition-all text-gray-900 dark:text-gray-50 bg-base-white dark:bg-gray-950 hover:bg-gray-50 dark:hover:bg-gray-800 focus-visible:shadow-ring-gray-xs outline-none"
            onClick={(e) => onClick(e, name, content)}
          >
            <Icon variant={icon} />
            <p className="text-xs/xs md:text-sm/sm font-semibold line-clamp-2">{name}</p>
          </button>
        </TooltipTrigger>
        <TooltipContent>
          <p>{name}</p>
        </TooltipContent>
        {onRemove && (
          <Button
            variant="tertiary color"
            size="icon-xs"
            className="absolute right-1 top-1"
            onClick={(e) => onRemove(e, name)}
          >
            <Icon variant="delete" className="w-5 h-5" />
          </Button>
        )}
      </Tooltip>
    </div>
  );
};

TemplateItem.Skeleton = function TemplateItemSkeleton() {
  return (
    <Skeleton className="w-[80px] h-[80px] flex-shrink-0 md:w-[100px] md:h-[100px] rounded-lg border border-gray-200 dark:border-gray-800 bg-base-white dark:bg-gray-950" />
  );
};

interface Template {
  name: string;
  icon: string;
  content?: string;
}

const defaultTemplates: Template[] = [
  {
    name: "Clear",
    icon: "file-04",
    content: "",
  },
  {
    name: "Website Development Proposal",
    icon: "file-05",
    content: `[{"id":"f4d965bf-c558-42ba-91ee-7c3a5bc2d646","type":"heading","props":{"textColor":"default","backgroundColor":"default","textAlignment":"left","level":1},"content":[{"type":"text","text":"Website Development Proposal Template","styles":{}}],"children":[]},{"id":"92906814-9951-4a76-ac85-56a9d97b2319","type":"paragraph","props":{"textColor":"default","backgroundColor":"default","textAlignment":"left"},"content":[{"type":"text","text":"Prepared By:","styles":{"bold":true}}],"children":[]},{"id":"506aa01a-21cf-4712-863b-271918d03897","type":"paragraph","props":{"textColor":"default","backgroundColor":"default","textAlignment":"left"},"content":[{"type":"text","text":"[Sender First Name] [Sender Last Name]","styles":{}}],"children":[]},{"id":"fd19bc84-a5f7-45d0-8cde-31d988a5c5a4","type":"paragraph","props":{"textColor":"default","backgroundColor":"default","textAlignment":"left"},"content":[{"type":"text","text":"[Sender Company]","styles":{}}],"children":[]},{"id":"4d0e5a66-34ea-4f23-8f8f-409f59e3e94c","type":"paragraph","props":{"textColor":"default","backgroundColor":"default","textAlignment":"left"},"content":[{"type":"text","text":"Prepared for:","styles":{"bold":true}}],"children":[]},{"id":"52b9c3c6-5747-4f97-8c42-00ed3e00f0cc","type":"paragraph","props":{"textColor":"default","backgroundColor":"default","textAlignment":"left"},"content":[{"type":"text","text":"[Client First Name] [Client LastName]","styles":{}}],"children":[]},{"id":"2e96d1eb-664c-416b-99f0-987029dd0e10","type":"paragraph","props":{"textColor":"default","backgroundColor":"default","textAlignment":"left"},"content":[{"type":"text","text":"[Client Company]","styles":{}}],"children":[]},{"id":"3d9728e5-4275-44b4-9121-69183270a2d4","type":"paragraph","props":{"textColor":"default","backgroundColor":"default","textAlignment":"left"},"content":[{"type":"text","text":"Prepared on: ","styles":{"bold":true}},{"type":"text","text":"[Date]","styles":{}}],"children":[]},{"id":"d8a2f588-0f18-405f-80a1-04f73b1a26ce","type":"heading","props":{"textColor":"default","backgroundColor":"default","textAlignment":"left","level":2},"content":[{"type":"text","text":"Introduction","styles":{}}],"children":[]},{"id":"0e1ddbe4-3ab4-4426-a943-082638948b95","type":"paragraph","props":{"textColor":"default","backgroundColor":"default","textAlignment":"left"},"content":[{"type":"text","text":"Dear [Client Name],","styles":{}}],"children":[]},{"id":"645c2c09-fbd0-4cb3-8234-594a716fef12","type":"paragraph","props":{"textColor":"default","backgroundColor":"default","textAlignment":"left"},"content":[{"type":"text","text":"Thank you for choosing [Sender Company]. It was a pleasure to meet with you and discuss your website development needs. We look forward to collaborating with and creating your website development project. We understand the challenge of finding the right website development company to attend to your unique needs, and appreciate your confidence in choosing [Sender Company]. With [X number of years] experience and an exceptional in-house team of designers, copywriters and developers, we are dedicated to executing your perfect website on time and within budget.","styles":{}}],"children":[]},{"id":"5bff3f87-6a10-4412-b404-963e041dc982","type":"paragraph","props":{"textColor":"default","backgroundColor":"default","textAlignment":"left"},"content":[{"type":"text","text":"With a global work portfolio and collaboration with numerous companies both large and small, we have the expertise and creativity to help you stand out in a crowded market. We look forward to working with you.","styles":{}}],"children":[]},{"id":"a0bbccb7-a31c-4e81-a91d-ccc603ef9b4f","type":"paragraph","props":{"textColor":"default","backgroundColor":"default","textAlignment":"left"},"content":[{"type":"text","text":"You needn’t worry. Using creative responsive design, we will help you achieve your desired global reach, optimize client conversion rates, ensure your website is adapted to scale and set up for optimal performance.","styles":{}}],"children":[]},{"id":"ffdf0073-f518-41a5-aee0-f316e34828ef","type":"paragraph","props":{"textColor":"default","backgroundColor":"default","textAlignment":"left"},"content":[{"type":"text","text":"We look forward to working with you and thank you again for choosing [Sender Company].","styles":{}}],"children":[]},{"id":"5505b844-93d1-4b37-a47e-94eb712e394a","type":"paragraph","props":{"textColor":"default","backgroundColor":"default","textAlignment":"left"},"content":[{"type":"text","text":"Sincerely,","styles":{}}],"children":[]},{"id":"10abf9d2-6fa6-4780-9379-bf3495a979a1","type":"paragraph","props":{"textColor":"default","backgroundColor":"default","textAlignment":"left"},"content":[{"type":"text","text":"[Sender Full Name]","styles":{}}],"children":[]},{"id":"2992d8f5-23aa-4518-8d96-88a2162fdfa1","type":"paragraph","props":{"textColor":"default","backgroundColor":"default","textAlignment":"left"},"content":[{"type":"text","text":"[Sender Title]","styles":{}}],"children":[]},{"id":"4440c47f-de85-4824-b4fe-e6d4c5011400","type":"paragraph","props":{"textColor":"default","backgroundColor":"default","textAlignment":"left"},"content":[{"type":"text","text":"[Sender Company]","styles":{}}],"children":[]},{"id":"2a07a3ab-225c-4fc3-b852-1e9d3ea26783","type":"heading","props":{"textColor":"default","backgroundColor":"default","textAlignment":"left","level":2},"content":[{"type":"text","text":"Our team","styles":{}}],"children":[]},{"id":"61e1402c-e909-4e5e-bdf1-54ff363e7a2d","type":"heading","props":{"textColor":"default","backgroundColor":"default","textAlignment":"left","level":3},"content":[{"type":"text","text":"Meet the Creative Force behind Your Website:","styles":{}}],"children":[]},{"id":"b089e590-2397-4863-b511-af8b81d718d7","type":"paragraph","props":{"textColor":"default","backgroundColor":"default","textAlignment":"left"},"content":[{"type":"text","text":"Our dedicated team of professionals with [X number of years] of combined experience is here to ensure that your project is completed to your utmost satisfaction.","styles":{}}],"children":[]},{"id":"abad87d8-19fd-45e6-a7b9-ffe8a689e28f","type":"table","props":{"textColor":"default","backgroundColor":"default"},"content":{"type":"tableContent","rows":[{"cells":[[{"type":"text","text":"[NAME]","styles":{}}],[{"type":"text","text":"[NAME]","styles":{}}]]},{"cells":[[{"type":"text","text":"[MARKETING DIRECTOR]","styles":{}}],[{"type":"text","text":"[DESIGNER]","styles":{}}]]}]},"children":[]},{"id":"b62c3e4d-2594-4149-8288-fb3413b064f5","type":"heading","props":{"textColor":"default","backgroundColor":"default","textAlignment":"left","level":2},"content":[{"type":"text","text":"Scope of services","styles":{}}],"children":[]},{"id":"c428fc10-a27a-4b2f-8cda-b4a8ebe77591","type":"paragraph","props":{"textColor":"default","backgroundColor":"default","textAlignment":"left"},"content":[{"type":"text","text":"[Client Company] will require a full website build as the primary step in developing and supporting their digital marketing strategy. Several steps will be undertaken in order to understand and execute the unique needs of [Client Company].","styles":{}}],"children":[]},{"id":"cced6d07-a986-4eef-bf32-7224e5b7f093","type":"heading","props":{"textColor":"default","backgroundColor":"default","textAlignment":"left","level":2},"content":[{"type":"text","text":"Research","styles":{}}],"children":[]},{"id":"7132a5f2-3f76-4bd5-a240-6fc5ae66293f","type":"paragraph","props":{"textColor":"default","backgroundColor":"default","textAlignment":"left"},"content":[{"type":"text","text":"This is the foundation upon which the website will be built. In order to help you achieve your goals and reach your target audience, we first need to understand your services/ products and the aspirations for your company. We will also research the competitive landscape, establish benchmarks and make your value proposition unique. The website will also be scalable and easily support increased traffic over time.","styles":{}}],"children":[]},{"id":"4b355c82-8cfb-4eaa-ba67-e6d75ac49214","type":"heading","props":{"textColor":"default","backgroundColor":"default","textAlignment":"left","level":2},"content":[{"type":"text","text":"Design","styles":{}}],"children":[]},{"id":"80bd8926-a1a3-4e0c-adf1-145997dd3eae","type":"paragraph","props":{"textColor":"default","backgroundColor":"default","textAlignment":"left"},"content":[{"type":"text","text":"Once the research has been compiled and evaluated, the design process begins. We will design the skeleton and several versions of the site with all the necessary pages include","styles":{}}],"children":[]},{"id":"b52784ee-0ecf-4cf5-b860-54a626d69f51","type":"paragraph","props":{"textColor":"default","backgroundColor":"default","textAlignment":"left"},"content":[{"type":"text","text":"Website Structure:","styles":{}}],"children":[]},{"id":"49be72cf-a653-44ce-a7ff-9ae74b00982a","type":"paragraph","props":{"textColor":"default","backgroundColor":"default","textAlignment":"left"},"content":[{"type":"text","text":"The following pages will be included in the site:","styles":{}}],"children":[]},{"id":"3d84f016-dd79-4ca8-89e3-ee4f0fc9fb70","type":"bulletListItem","props":{"textColor":"default","backgroundColor":"default","textAlignment":"left"},"content":[{"type":"text","text":"Homepage","styles":{}}],"children":[]},{"id":"3d4cb875-16ec-413d-8692-0437c63b835e","type":"bulletListItem","props":{"textColor":"default","backgroundColor":"default","textAlignment":"left"},"content":[{"type":"text","text":"About","styles":{}}],"children":[]},{"id":"1342c955-c65f-4ba6-89ba-96371629520e","type":"bulletListItem","props":{"textColor":"default","backgroundColor":"default","textAlignment":"left"},"content":[{"type":"text","text":"Products/Services","styles":{}}],"children":[]},{"id":"528016b0-f85e-441b-ad3e-eddc2219b7d0","type":"bulletListItem","props":{"textColor":"default","backgroundColor":"default","textAlignment":"left"},"content":[{"type":"text","text":"Contact","styles":{}}],"children":[]},{"id":"04e62318-c2e1-4c60-8af0-25a5ddc10f21","type":"bulletListItem","props":{"textColor":"default","backgroundColor":"default","textAlignment":"left"},"content":[{"type":"text","text":"Blog","styles":{}}],"children":[]},{"id":"b2715f7c-c17c-46e5-a444-aa8a0c259da5","type":"bulletListItem","props":{"textColor":"default","backgroundColor":"default","textAlignment":"left"},"content":[{"type":"text","text":"[Additional page]","styles":{}}],"children":[]},{"id":"1f52f5e2-79e7-46ab-b309-5254e8bfe6e0","type":"heading","props":{"textColor":"default","backgroundColor":"default","textAlignment":"left","level":2},"content":[{"type":"text","text":"Development","styles":{}}],"children":[]},{"id":"e3cff610-4aba-4655-b6c3-3993dd417727","type":"paragraph","props":{"textColor":"default","backgroundColor":"default","textAlignment":"left"},"content":[{"type":"text","text":"Once the structural components has been laid out, we will ask you to evaluate progress, and add any additional features desired. When the design is approved, our team will begin building the site.","styles":{}}],"children":[]},{"id":"8dff98f9-1df3-4e64-888b-8320cd2ddda9","type":"heading","props":{"textColor":"default","backgroundColor":"default","textAlignment":"left","level":2},"content":[{"type":"text","text":"Integrations and Testing","styles":{}}],"children":[]},{"id":"e4f1aaf4-6d0a-47c9-a975-4e4b573c8f60","type":"paragraph","props":{"textColor":"default","backgroundColor":"default","textAlignment":"left"},"content":[{"type":"text","text":"Any designs and additional features will be added at this point. Please list any integrations you would like to see on your site. Once this stage is completed, we will begin testing your site for responsiveness and functionality. The work has to be flawless upon launch.","styles":{}}],"children":[]},{"id":"5028160b-cb91-4e4a-a86c-15772a25862e","type":"heading","props":{"textColor":"default","backgroundColor":"default","textAlignment":"left","level":2},"content":[{"type":"text","text":"Additional Features and Recommendations","styles":{}}],"children":[]},{"id":"d168452c-8390-4a75-ab1f-ba84c3187857","type":"paragraph","props":{"textColor":"default","backgroundColor":"default","textAlignment":"left"},"content":[{"type":"text","text":"Once the site is completed and launched, we would recommend you retain our support services for the future. As part of the package, [Sender Company] will provide data analytics, optimize functionality on a monthly basis and provide further advice on how to increase traffic and conversion.","styles":{}}],"children":[]},{"id":"f114d2ee-2025-4857-8fd8-0ce7775ee114","type":"heading","props":{"textColor":"default","backgroundColor":"default","textAlignment":"left","level":2},"content":[{"type":"text","text":"Project timeline","styles":{}}],"children":[]},{"id":"4d02882e-c1b9-4802-8de7-507a2c108067","type":"paragraph","props":{"textColor":"default","backgroundColor":"default","textAlignment":"left"},"content":[{"type":"text","text":"The table below illustrates the step by step process that will be undertaken as well as the projected completion date for each section. If the situation changes in any way, you will be notified and progress will be discussed.","styles":{}}],"children":[]},{"id":"8f1a62e5-51a4-4bec-b93f-c13f0400a521","type":"table","props":{"textColor":"default","backgroundColor":"default"},"content":{"type":"tableContent","rows":[{"cells":[[{"type":"text","text":"Project stage","styles":{"bold":true}}],[{"type":"text","text":"Projected date of completion","styles":{"bold":true}}]]},{"cells":[[{"type":"text","text":"Initial Project Meeting","styles":{"bold":true}}],[{"type":"text","text":"[Project Start Date]","styles":{}}]]},{"cells":[[{"type":"text","text":"Initial Design Proposal","styles":{"bold":true}}],[{"type":"text","text":"[Project Proposal End Date]","styles":{}}]]},{"cells":[[{"type":"text","text":"Page Drafts and Mock-ups","styles":{"bold":true}}],[{"type":"text","text":"[Draft End Date]","styles":{}}]]},{"cells":[[{"type":"text","text":"Images and Video content Inserted","styles":{"bold":true}}],[{"type":"text","text":"[Draft End Date]","styles":{}}]]},{"cells":[[{"type":"text","text":"Functionality","styles":{"bold":true}}],[{"type":"text","text":"[Draft End Date]","styles":{}}]]},{"cells":[[{"type":"text","text":"Website Completion","styles":{"bold":true}}],[{"type":"text","text":"[End Date]","styles":{}}]]},{"cells":[[{"type":"text","text":"Functionality Testing","styles":{"bold":true}}],[{"type":"text","text":"[End Date]","styles":{}}]]},{"cells":[[{"type":"text","text":"Launch","styles":{"bold":true}}],[{"type":"text","text":"[End Date]","styles":{}}]]}]},"children":[]},{"id":"bd0350b5-c1ee-44e6-80e2-116a3327dc29","type":"heading","props":{"textColor":"default","backgroundColor":"default","textAlignment":"left","level":2},"content":[{"type":"text","text":"Your investment","styles":{}}],"children":[]},{"id":"b08dfcd1-027a-472e-9a10-93fab5450a3a","type":"paragraph","props":{"textColor":"default","backgroundColor":"default","textAlignment":"left"},"content":[{"type":"text","text":"Below please find the breakdown of fees and the required deposit due upon signing of this proposal. All invoices will be sent to [Client Company] on the agreed upon dates. [1st of every month starting from X until completion X]","styles":{}}],"children":[]},{"id":"a271f006-771a-417b-a686-f43b5d7ee81f","type":"paragraph","props":{"textColor":"default","backgroundColor":"default","textAlignment":"left"},"content":[{"type":"text","text":"If you require any amendments in the scope of work, please inform us as soon as possible. Pricing and time frames will also be changed accordingly.","styles":{}}],"children":[]},{"id":"2bbaa0f5-e402-42b1-9c0a-d4aa9e48e2c4","type":"table","props":{"textColor":"default","backgroundColor":"default"},"content":{"type":"tableContent","rows":[{"cells":[[{"type":"text","text":"Name of Service","styles":{"bold":true}}],[{"type":"text","text":"Hourly Inversment","styles":{"bold":true}}],[{"type":"text","text":"Qty","styles":{"bold":true}}],[{"type":"text","text":"Subtotal","styles":{"bold":true}}]]},{"cells":[[{"type":"text","text":"[Service Name 1]","styles":{"bold":true}}],[{"type":"text","text":"[X]","styles":{}}],[{"type":"text","text":"[X]","styles":{}}],[{"type":"text","text":"[$]","styles":{}}]]},{"cells":[[{"type":"text","text":"[Service Name 1]","styles":{"bold":true}}],[{"type":"text","text":"[X]","styles":{}}],[{"type":"text","text":"[X]","styles":{}}],[{"type":"text","text":"[$]","styles":{}}]]},{"cells":[[{"type":"text","text":"Total","styles":{"bold":true}}],[{"type":"text","text":"-","styles":{}}],[],[{"type":"text","text":"[$]","styles":{}}]]}]},"children":[]},{"id":"b5478bd6-098a-4d8e-b340-2dacb900bd0c","type":"paragraph","props":{"textColor":"default","backgroundColor":"default","textAlignment":"left"},"content":[{"type":"text","text":"Below please find additional fees mandatory and optional based on agreement. Website hosting fees are required by law and billed at the 1st day of every month for the duration of the website’s existence. The remaining services are optional. If you choose to opt in, all purchased features will appear on your invoice once a month starting on [X DATE].","styles":{}}],"children":[]},{"id":"d0c2aea7-bc97-4ae1-abcc-0d32b6abe835","type":"table","props":{"textColor":"default","backgroundColor":"default"},"content":{"type":"tableContent","rows":[{"cells":[[{"type":"text","text":"Additional fees","styles":{"bold":true}}],[{"type":"text","text":"Hourly Investment","styles":{"bold":true}}],[{"type":"text","text":"Qty","styles":{"bold":true}}],[{"type":"text","text":"Subtotal","styles":{"bold":true}}]]},{"cells":[[{"type":"text","text":"Website Hosting","styles":{"bold":true}}],[{"type":"text","text":"[X]","styles":{}}],[{"type":"text","text":"[X]","styles":{}}],[{"type":"text","text":"[$]","styles":{}}]]},{"cells":[[{"type":"text","text":"Business Support","styles":{"bold":true}}],[{"type":"text","text":"[X]","styles":{}}],[{"type":"text","text":"[X]","styles":{}}],[{"type":"text","text":"[$]","styles":{}}]]},{"cells":[[{"type":"text","text":"User Testing","styles":{"bold":true}}],[{"type":"text","text":"[X]","styles":{}}],[{"type":"text","text":"[X]","styles":{}}],[{"type":"text","text":"[$]","styles":{}}]]},{"cells":[[{"type":"text","text":"Maintenance and Analytics","styles":{"bold":true}}],[{"type":"text","text":"[X]","styles":{}}],[{"type":"text","text":"[X]","styles":{}}],[{"type":"text","text":"[$]","styles":{}}]]},{"cells":[[{"type":"text","text":"Business Support","styles":{"bold":true}}],[{"type":"text","text":"[X]","styles":{}}],[{"type":"text","text":"[X]","styles":{}}],[{"type":"text","text":"[$]","styles":{}}]]},{"cells":[[{"type":"text","text":"Total","styles":{"bold":true}}],[{"type":"text","text":"-","styles":{}}],[{"type":"text","text":"-","styles":{}}],[{"type":"text","text":"[$]","styles":{}}]]}]},"children":[]},{"id":"c239569c-ef0b-43eb-ad7b-2676242e5714","type":"heading","props":{"textColor":"default","backgroundColor":"default","textAlignment":"left","level":2},"content":[{"type":"text","text":"Terms and conditions","styles":{}}],"children":[]},{"id":"0309f201-f925-4489-bbae-e1c343f8e772","type":"paragraph","props":{"textColor":"default","backgroundColor":"default","textAlignment":"left"},"content":[{"type":"text","text":"[Client Company] hereby acknowledges signing of this proposal as a free agent and contract client of [Sender Company]. The purpose of this proposal is to solidify business relations between the two entities with regard to the of website development, hosting, maintenance and support.","styles":{}}],"children":[]},{"id":"19d95343-dcad-4c25-a54f-4dc699875001","type":"heading","props":{"textColor":"default","backgroundColor":"default","textAlignment":"left","level":3},"content":[{"type":"text","text":"Terms of Payment","styles":{}}],"children":[]},{"id":"dff22eca-8ab1-4cea-8d25-e292708f1f11","type":"paragraph","props":{"textColor":"default","backgroundColor":"default","textAlignment":"left"},"content":[{"type":"text","text":"Billing Schedule is set in the above table. For any additional monthly services, billing will occur at the 1st business day at the start of every month. All payments are to be made in [X Currency]. The 1st initial invoice will also serve as a deposit for services rendered.","styles":{}}],"children":[]},{"id":"db225de3-fc17-4fa6-8756-cbb7d345ea37","type":"paragraph","props":{"textColor":"default","backgroundColor":"default","textAlignment":"left"},"content":[{"type":"text","text":"Failure to compensate will result in secession of services, interest on unpaid invoices as well as violation of contractual duties.","styles":{}}],"children":[]},{"id":"84bf8b47-e99d-4ed0-8759-c0c2f1544e31","type":"heading","props":{"textColor":"default","backgroundColor":"default","textAlignment":"left","level":3},"content":[{"type":"text","text":"Revision of Services Rendered","styles":{}}],"children":[]},{"id":"38bafeac-819b-4597-9c0b-e01190e66303","type":"paragraph","props":{"textColor":"default","backgroundColor":"default","textAlignment":"left"},"content":[{"type":"text","text":"If changes are made during the website design process, [Client Company] may incur additional charges. All charges are expected to be paid upon project completion.","styles":{}}],"children":[]},{"id":"768a24ff-8ceb-4c23-a6da-6df77852bae0","type":"heading","props":{"textColor":"default","backgroundColor":"default","textAlignment":"left","level":3},"content":[{"type":"text","text":"Project Completion","styles":{}}],"children":[]},{"id":"cd085284-a84a-4d9e-b56d-9330ed06dd80","type":"paragraph","props":{"textColor":"default","backgroundColor":"default","textAlignment":"left"},"content":[{"type":"text","text":"[Client Company] and [Sender Company] agree to collaborate during the entire project design process in order to complete the project at the agreed upon deadline. [Sender Company] agrees to complete the project a week before the launch date.","styles":{}}],"children":[]},{"id":"423d0470-f9e0-4051-886b-428083e891c6","type":"heading","props":{"textColor":"default","backgroundColor":"default","textAlignment":"left","level":3},"content":[{"type":"text","text":"Client Responsibility for Accuracy","styles":{}}],"children":[]},{"id":"5bf7e294-9a1a-4a30-9475-69eb19cc986f","type":"paragraph","props":{"textColor":"default","backgroundColor":"default","textAlignment":"left"},"content":[{"type":"text","text":"[Client Company] agrees that any and all images, documents and data is accurate to the best of their knowledge.","styles":{}}],"children":[]},{"id":"a85eba73-f76c-4f44-92e0-35d3fbea9d3d","type":"heading","props":{"textColor":"default","backgroundColor":"default","textAlignment":"left","level":3},"content":[{"type":"text","text":"Copyright and Trademarks","styles":{}}],"children":[]},{"id":"7493b548-887c-44e9-8419-fd1219718eab","type":"paragraph","props":{"textColor":"default","backgroundColor":"default","textAlignment":"left"},"content":[{"type":"text","text":"[Client Company] will provide images, written documentation and other information which they are expressly permitted to use. [Client Company] guarantees that they have permission from the rightful owners to utilize the data provided to [Sender Company]. [Client Company]will also unconditionally defend [Sender Company] if a situation arises in which permission was not acquired by [Client Company]. [Sender Company] will not be held liable for copyright infringement if [Client Company] did not ensure compliance.","styles":{}}],"children":[]},{"id":"de271357-2360-4764-8522-d3aa47e3ada9","type":"heading","props":{"textColor":"default","backgroundColor":"default","textAlignment":"left","level":3},"content":[{"type":"text","text":"[Sender Company] Copyright Infringement Declaration","styles":{}}],"children":[]},{"id":"fb21ded9-26ba-4efc-bd7a-2e203f2c7659","type":"paragraph","props":{"textColor":"default","backgroundColor":"default","textAlignment":"left"},"content":[{"type":"text","text":"[Sender Company] hereby declares that any and all images, information and data are original and sole property of [Sender Company]. All aspects of the design process will be disclosed to [Client Company] in the spirit of full disclosure and compliance. [Sender Company] will reserve the rights to utilize aspects of this work as promotional material.","styles":{}}],"children":[]},{"id":"85694415-f6ee-46c5-9b3c-efc9a7139a3f","type":"heading","props":{"textColor":"default","backgroundColor":"default","textAlignment":"left","level":3},"content":[{"type":"text","text":"Cancellation of Services","styles":{}}],"children":[]},{"id":"a74f6530-5d6a-4d74-857d-dd3b9b4c4130","type":"paragraph","props":{"textColor":"default","backgroundColor":"default","textAlignment":"left"},"content":[{"type":"text","text":"[Client Company] has the right to cancel work orders throughout the collaboration process. [Client Company] does agree however to reimburse [Sender Company] for all services rendered up until cancellation. Deposit will not be reimbursed.","styles":{}}],"children":[]},{"id":"d883544a-2ed0-4450-b6c6-b7a713f4abee","type":"heading","props":{"textColor":"default","backgroundColor":"default","textAlignment":"left","level":3},"content":[{"type":"text","text":"Legal Rights and Severability","styles":{}}],"children":[]},{"id":"d24b5021-56e6-4819-9858-f981e76a8120","type":"paragraph","props":{"textColor":"default","backgroundColor":"default","textAlignment":"left"},"content":[{"type":"text","text":"[Sender Company] hereby stipulates that the project will be completed by the deadline agreed upon, and the work will be error free and efficient. If any issues persist, [Sender Company] will ensure proper functionality is restored without issue. [Sender Company] is not liable nor shall it be liable for any damages, lost profits or third party involvement. If any section or provision is deemed to be illegal herein, that provision will be null and void. The remainder of the contract is fully enforceable however.","styles":{}}],"children":[]},{"id":"9cec3a3d-404e-45f3-94c5-aee1b141c196","type":"paragraph","props":{"textColor":"default","backgroundColor":"default","textAlignment":"left"},"content":[{"type":"text","text":"Once you have fully read and understood the stipulations and provisions within this document, please utilize our e-signature feature to signify your consent to the proposal. We look forward to working with you.","styles":{}}],"children":[]},{"id":"91242efa-d8eb-49d8-b468-6aa64367e3e6","type":"paragraph","props":{"textColor":"default","backgroundColor":"default","textAlignment":"left"},"content":[],"children":[]},{"id":"b6cfbee5-0b3a-42fb-8cdf-3bedcdea8c65","type":"paragraph","props":{"textColor":"default","backgroundColor":"default","textAlignment":"left"},"content":[{"type":"text","text":"[Client Company]","styles":{}}],"children":[]},{"id":"36dd12a8-6bb9-42c3-87d4-c45f707c9ba8","type":"paragraph","props":{"textColor":"default","backgroundColor":"default","textAlignment":"left"},"content":[{"type":"text","text":"Signature","styles":{}}],"children":[]},{"id":"3358912f-b879-42c6-9874-e2394c676868","type":"paragraph","props":{"textColor":"default","backgroundColor":"default","textAlignment":"left"},"content":[{"type":"text","text":"[Client First Name] [Client Last Name]","styles":{}}],"children":[]},{"id":"56a3235d-8533-445d-bd90-2f5530ff203b","type":"paragraph","props":{"textColor":"default","backgroundColor":"default","textAlignment":"left"},"content":[],"children":[]},{"id":"4f13b6bc-c99d-4f28-8631-ec0df3760106","type":"paragraph","props":{"textColor":"default","backgroundColor":"default","textAlignment":"left"},"content":[{"type":"text","text":"[Sender Company]","styles":{}}],"children":[]},{"id":"dc65724b-7132-416d-9098-215b803e8fc3","type":"paragraph","props":{"textColor":"default","backgroundColor":"default","textAlignment":"left"},"content":[{"type":"text","text":"Signature","styles":{}}],"children":[]},{"id":"83c4ef64-c918-44fe-9f1f-cbd2e39bf515","type":"paragraph","props":{"textColor":"default","backgroundColor":"default","textAlignment":"left"},"content":[{"type":"text","text":"[Sender First Name] [Sender Last Name]","styles":{}}],"children":[]},{"id":"cf42eb85-d757-4fa9-b1c3-02ff24254d44","type":"paragraph","props":{"textColor":"default","backgroundColor":"default","textAlignment":"left"},"content":[],"children":[]}]`,
  },
  {
    name: "Sales Proposal",
    icon: "file-05",
    content: `[{"id":"initialBlockId","type":"heading","props":{"textColor":"default","backgroundColor":"default","textAlignment":"left","level":1},"content":[{"type":"text","text":"Sales Proposal Template","styles":{}}],"children":[]},{"id":"0014191c-8e13-491d-80c7-1fe3ea3babb6","type":"paragraph","props":{"textColor":"default","backgroundColor":"default","textAlignment":"left"},"content":[{"type":"text","text":"Prepared By:","styles":{"bold":true}}],"children":[]},{"id":"76b104ec-ba69-4ebe-af0c-6dfed1074e2c","type":"paragraph","props":{"textColor":"default","backgroundColor":"default","textAlignment":"left"},"content":[{"type":"text","text":"[Sender First Name] [Sender Last Name]","styles":{}}],"children":[]},{"id":"82ed7f37-3552-443a-9ecd-96e2ba8cf37d","type":"paragraph","props":{"textColor":"default","backgroundColor":"default","textAlignment":"left"},"content":[{"type":"text","text":"[Sender Company]","styles":{}}],"children":[]},{"id":"0fc28b3d-9988-4ed4-82b6-409095c09601","type":"paragraph","props":{"textColor":"default","backgroundColor":"default","textAlignment":"left"},"content":[{"type":"text","text":"Prepared for:","styles":{"bold":true}}],"children":[]},{"id":"28f5265a-ae69-4be5-ab9c-bb111a2edfd3","type":"paragraph","props":{"textColor":"default","backgroundColor":"default","textAlignment":"left"},"content":[{"type":"text","text":"[Client First Name] [Client Last Name]","styles":{}}],"children":[]},{"id":"d231767d-1534-45e0-9093-75c83124040e","type":"paragraph","props":{"textColor":"default","backgroundColor":"default","textAlignment":"left"},"content":[{"type":"text","text":"[Client Company]","styles":{}}],"children":[]},{"id":"0df70dea-714e-4e6a-888f-2ddeff4f14fe","type":"paragraph","props":{"textColor":"default","backgroundColor":"default","textAlignment":"left"},"content":[{"type":"text","text":"Prepared on","styles":{"bold":true}},{"type":"text","text":": [Date]","styles":{}}],"children":[]},{"id":"7ca4ebf2-82e4-46eb-8d4e-5318a9ab4964","type":"heading","props":{"textColor":"default","backgroundColor":"default","textAlignment":"left","level":2},"content":[{"type":"text","text":"Introduction","styles":{}}],"children":[]},{"id":"779a8360-7df5-401a-a6b5-c4eaf636f7a8","type":"paragraph","props":{"textColor":"default","backgroundColor":"default","textAlignment":"left"},"content":[{"type":"text","text":"This sales proposal document was prepared for [Name of Client Company]. It includes all relevant information previously discussed including: the scope of the project, pricing and finalised terms and conditions as discussed with and requested by [Name of Client Company].","styles":{}}],"children":[]},{"id":"f85b0ee5-a9bb-4607-ba5a-32306a2fe387","type":"heading","props":{"textColor":"default","backgroundColor":"default","textAlignment":"left","level":2},"content":[{"type":"text","text":"Company background","styles":{}}],"children":[]},{"id":"dfb8c93b-7c95-44ec-8ce2-5e73bd752495","type":"paragraph","props":{"textColor":"default","backgroundColor":"default","textAlignment":"left"},"content":[{"type":"text","text":"This sales proposal document was prepared for [Name of Client Company]. It includes all relevant information previously discussed including: the scope of the project, pricing and finalized terms and conditions as discussed with and requested by [Name of Client Company].","styles":{}}],"children":[]},{"id":"c93445c9-7207-4230-a1f2-9e260dac09f1","type":"paragraph","props":{"textColor":"default","backgroundColor":"default","textAlignment":"left"},"content":[],"children":[]},{"id":"d1299b5c-9e79-4532-ba9e-d7854878a2d0","type":"paragraph","props":{"textColor":"default","backgroundColor":"default","textAlignment":"left"},"content":[{"type":"text","text":"[SENDER COMPANY is a leader in] with [X years of experience in the X field]","styles":{}}],"children":[]},{"id":"010cb035-c5f1-4ba9-8aa0-753d76f5f0cc","type":"heading","props":{"textColor":"default","backgroundColor":"default","textAlignment":"left","level":2},"content":[{"type":"text","text":"Our team","styles":{}}],"children":[]},{"id":"3b7a8d5d-5dab-4568-81ef-1b8ff4502a58","type":"table","props":{"textColor":"default","backgroundColor":"default"},"content":{"type":"tableContent","rows":[{"cells":[[{"type":"text","text":"[NAME]","styles":{}}],[{"type":"text","text":"[NAME]","styles":{}}]]},{"cells":[[{"type":"text","text":"[MANAGER]","styles":{}}],[{"type":"text","text":"[TEAM LEAD]","styles":{}}]]}]},"children":[]},{"id":"210b8b67-cc61-4caa-928c-85d754e7f31b","type":"heading","props":{"textColor":"default","backgroundColor":"default","textAlignment":"left","level":2},"content":[{"type":"text","text":"Market research section","styles":{}}],"children":[]},{"id":"afb18691-e240-4636-be56-fe7484e21c53","type":"paragraph","props":{"textColor":"default","backgroundColor":"default","textAlignment":"left"},"content":[{"type":"text","text":"Tell the potential client what the company speciality is and how you plan to solve the[Name of Client Company] problem.","styles":{}}],"children":[]},{"id":"fa199be1-37ee-4103-9630-a42c43a01dcc","type":"heading","props":{"textColor":"default","backgroundColor":"default","textAlignment":"left","level":2},"content":[{"type":"text","text":"Scope of work","styles":{}}],"children":[]},{"id":"1f06d101-b2ea-4237-a396-cb1a2123d945","type":"paragraph","props":{"textColor":"default","backgroundColor":"default","textAlignment":"left"},"content":[{"type":"text","text":"Objectives: What problems/pain points is the [Sender Company] going to alleviate.","styles":{}}],"children":[]},{"id":"560797fe-2206-4cd9-9799-e07234662b30","type":"table","props":{"textColor":"default","backgroundColor":"default"},"content":{"type":"tableContent","rows":[{"cells":[[{"type":"text","text":"Challenges","styles":{"bold":true}}],[{"type":"text","text":"Goals","styles":{"bold":true}}]]},{"cells":[[{"type":"text","text":"[Details]","styles":{}}],[{"type":"text","text":"[Details]","styles":{}}]]},{"cells":[[{"type":"text","text":"[Details]","styles":{}}],[{"type":"text","text":"[Details]","styles":{}}]]}]},"children":[]},{"id":"05a04da5-1585-4220-b957-e4303d5761f0","type":"heading","props":{"textColor":"default","backgroundColor":"default","textAlignment":"left","level":2},"content":[{"type":"text","text":"Proposed solution","styles":{}}],"children":[]},{"id":"79626353-0f94-4158-a8c3-162a80463f4b","type":"paragraph","props":{"textColor":"default","backgroundColor":"default","textAlignment":"left"},"content":[{"type":"text","text":"We have developed several programs/approaches/… that we believe would alleviate the issues you are facing.","styles":{}}],"children":[]},{"id":"b1b08cbe-8cb2-46dc-bade-c8e87c4a5411","type":"paragraph","props":{"textColor":"default","backgroundColor":"default","textAlignment":"left"},"content":[{"type":"text","text":"The methods/ products we suggest for the areas you are trying to improve are the following:","styles":{}}],"children":[]},{"id":"73d27a10-f519-48ea-aedd-44133cd7f385","type":"bulletListItem","props":{"textColor":"default","backgroundColor":"default","textAlignment":"left"},"content":[{"type":"text","text":"Write your text here","styles":{}}],"children":[]},{"id":"f9d21db7-ef25-4f73-93f9-e58589e4a0de","type":"bulletListItem","props":{"textColor":"default","backgroundColor":"default","textAlignment":"left"},"content":[{"type":"text","text":"Few Examples","styles":{}}],"children":[]},{"id":"9486b51b-6843-411e-9787-ecfb1bc9a0fe","type":"paragraph","props":{"textColor":"default","backgroundColor":"default","textAlignment":"left"},"content":[{"type":"text","text":"We are confident that our proposed solutions will benefit you and your company in X ways:","styles":{}}],"children":[]},{"id":"a250b323-9ad0-4c0d-84d2-204fa329ef59","type":"bulletListItem","props":{"textColor":"default","backgroundColor":"default","textAlignment":"left"},"content":[{"type":"text","text":"Write your text here","styles":{}}],"children":[]},{"id":"3eb219b9-908a-43f6-a8fa-ba28e50a101d","type":"bulletListItem","props":{"textColor":"default","backgroundColor":"default","textAlignment":"left"},"content":[{"type":"text","text":"Few Examples","styles":{}}],"children":[]},{"id":"aa2342e3-b1be-44b8-93d7-5a2de392d677","type":"paragraph","props":{"textColor":"default","backgroundColor":"default","textAlignment":"left"},"content":[{"type":"text","text":"Timeline:","styles":{"bold":true}}],"children":[]},{"id":"cf0135f7-b514-4c99-b6ba-3009f9a4008e","type":"paragraph","props":{"textColor":"default","backgroundColor":"default","textAlignment":"left"},"content":[{"type":"text","text":"[Sender Company] prides itself in completing the project on time and on budget. Our dedicated team of professionals will work with you to develop a timeline and budget favourable to all parties involved. We will guide and support you every step of the way.","styles":{}}],"children":[]},{"id":"d0b1dd7d-3e8f-40a0-93e9-82b4130187f5","type":"heading","props":{"textColor":"default","backgroundColor":"default","textAlignment":"left","level":2},"content":[{"type":"text","text":"Terms and pricing","styles":{}}],"children":[]},{"id":"beead30c-f222-4cd9-96b9-8e91be60b4ed","type":"paragraph","props":{"textColor":"default","backgroundColor":"default","textAlignment":"left"},"content":[{"type":"text","text":"Below, please find the proposed financial investment, time frame and all necessary legal commitments to begin our collaboration process. Please be sure to sign and initial every necessary document. [Sender Company] has already completed the approval process. If you require assistance, please do inform [ACCOUNT MANAGER] of [SENDER COMPANY].","styles":{}}],"children":[]},{"id":"04e43ede-d66e-4f65-9b10-30b0fd496b5e","type":"table","props":{"textColor":"default","backgroundColor":"default"},"content":{"type":"tableContent","rows":[{"cells":[[{"type":"text","text":"Name of service","styles":{"bold":true}}],[{"type":"text","text":"Price","styles":{"bold":true}}],[{"type":"text","text":"Subtotal","styles":{"bold":true}}]]},{"cells":[[{"type":"text","text":"[abc service]","styles":{"bold":true}}],[{"type":"text","text":"[Details]","styles":{}}],[{"type":"text","text":"[Details]","styles":{}}]]},{"cells":[[{"type":"text","text":"[abc service]","styles":{"bold":true}}],[{"type":"text","text":"[Details]","styles":{}}],[{"type":"text","text":"[Details]","styles":{}}]]}]},"children":[]},{"id":"7cd951ad-0c32-4694-8dfb-733ef1c26299","type":"heading","props":{"textColor":"default","backgroundColor":"default","textAlignment":"left","level":2},"content":[{"type":"text","text":"Sales contract","styles":{}}],"children":[]},{"id":"7c115837-d1bc-44d7-bcd9-8d9c7d9dac54","type":"paragraph","props":{"textColor":"default","backgroundColor":"default","textAlignment":"left"},"content":[{"type":"text","text":"The sales contract clearly illustrates the terms and conditions both parties must abide by in order for the contract and service to be deemed complete.","styles":{}}],"children":[]},{"id":"b725c98e-8074-4b20-ae10-9c203479bb5f","type":"paragraph","props":{"textColor":"default","backgroundColor":"default","textAlignment":"left"},"content":[{"type":"text","text":"Both seller [Sender Company] and purchaser [Name of Client Company] agree to the terms and conditions listed below:","styles":{}}],"children":[]},{"id":"289c0320-b504-4371-bd7b-4efa1389fdb8","type":"heading","props":{"textColor":"default","backgroundColor":"default","textAlignment":"left","level":3},"content":[{"type":"text","text":"1. Product/Service Purchased","styles":{}}],"children":[]},{"id":"410ed1b6-b37f-4e1b-a778-c306b11bdcc3","type":"paragraph","props":{"textColor":"default","backgroundColor":"default","textAlignment":"left"},"content":[{"type":"text","text":"The Purchaser hereby purchases the amount/ type of the Product/ Service as described within the contract delaminated as (the “Purchased Product”).","styles":{}}],"children":[]},{"id":"6141501f-47eb-4aee-8d79-ba2fa20d898b","type":"heading","props":{"textColor":"default","backgroundColor":"default","textAlignment":"left","level":3},"content":[{"type":"text","text":"2. Payment","styles":{}}],"children":[]},{"id":"fcc1af45-9bf8-496f-9578-2bf9b0bf2378","type":"paragraph","props":{"textColor":"default","backgroundColor":"default","textAlignment":"left"},"content":[{"type":"text","text":"The Purchaser hereby agrees to purchase the amount/ type of product/ service in the amount of X, as expanded upon in schedule X, section X.","styles":{}}],"children":[]},{"id":"b7f1a503-7911-43d3-b538-0b0937ebd8b8","type":"heading","props":{"textColor":"default","backgroundColor":"default","textAlignment":"left","level":3},"content":[{"type":"text","text":"3. Failure to make a payment","styles":{}}],"children":[]},{"id":"fcc54b4c-5773-4a3a-be56-36bbc17ad1f7","type":"paragraph","props":{"textColor":"default","backgroundColor":"default","textAlignment":"left"},"content":[{"type":"text","text":"The failure to complete the payment either on or before the agreed upon date in section X, will be deemed breach of contract resulting in actions taken by the seller.","styles":{}}],"children":[]},{"id":"1537dac6-3265-4985-80cb-9a8a836826f5","type":"heading","props":{"textColor":"default","backgroundColor":"default","textAlignment":"left","level":3},"content":[{"type":"text","text":"4. Amendments and modifications","styles":{}}],"children":[]},{"id":"adf9897c-b8f1-49bb-a77d-405133bf0e32","type":"paragraph","props":{"textColor":"default","backgroundColor":"default","textAlignment":"left"},"content":[{"type":"text","text":"Any changes to the contract will be considered null and void unless otherwise agreed upon by both parties.","styles":{}}],"children":[]},{"id":"091358e0-712e-46c7-88dd-2ed9ad66d5ea","type":"heading","props":{"textColor":"default","backgroundColor":"default","textAlignment":"left","level":2},"content":[{"type":"text","text":"Payment schedule","styles":{}}],"children":[]},{"id":"f3509ff5-1c07-48d9-9051-43b8c28fe71c","type":"table","props":{"textColor":"default","backgroundColor":"default"},"content":{"type":"tableContent","rows":[{"cells":[[{"type":"text","text":"Payment date","styles":{"bold":true}}],[{"type":"text","text":"Amount due","styles":{"bold":true}}]]},{"cells":[[{"type":"text","text":"Deposit date","styles":{"bold":true}}],[{"type":"text","text":"50%","styles":{}}]]},{"cells":[[{"type":"text","text":"1st payment data","styles":{"bold":true}}],[{"type":"text","text":"25%","styles":{}}]]},{"cells":[[{"type":"text","text":"Last payment 1 week after completion","styles":{"bold":true}}],[{"type":"text","text":"25%","styles":{}}]]}]},"children":[]},{"id":"d7dfe040-56a2-4ccb-a27a-7f2924b24d80","type":"heading","props":{"textColor":"default","backgroundColor":"default","textAlignment":"left","level":2},"content":[{"type":"text","text":"Signature of agreement","styles":{}}],"children":[]},{"id":"ca09deaf-302c-4bbd-ac05-70a7b0927ab8","type":"paragraph","props":{"textColor":"default","backgroundColor":"default","textAlignment":"left"},"content":[{"type":"text","text":"Both parties [Sender Company] and [Client Company] agree to the aforementioned stipulations and hereby in the witness of [First and Last Name], acquiesce and dutifully execute the above contract.","styles":{}}],"children":[]},{"id":"5671c204-da4f-4635-ba79-a60344f24741","type":"paragraph","props":{"textColor":"default","backgroundColor":"default","textAlignment":"left"},"content":[],"children":[]},{"id":"15003ab7-0cd5-4cb2-9b69-e0be645eba2a","type":"paragraph","props":{"textColor":"default","backgroundColor":"default","textAlignment":"left"},"content":[{"type":"text","text":"[Client Company]","styles":{}}],"children":[]},{"id":"2ddf7c3e-14a0-456d-adc6-13649d3c5647","type":"paragraph","props":{"textColor":"default","backgroundColor":"default","textAlignment":"left"},"content":[{"type":"text","text":"Signature","styles":{}}],"children":[]},{"id":"e5149327-4b53-4906-99e3-466ee6d73f8a","type":"paragraph","props":{"textColor":"default","backgroundColor":"default","textAlignment":"left"},"content":[{"type":"text","text":"[Client First Name] [Client Last Name]","styles":{}}],"children":[]},{"id":"80ed09e3-3eeb-4d72-8501-b41a3bc402d1","type":"paragraph","props":{"textColor":"default","backgroundColor":"default","textAlignment":"left"},"content":[],"children":[]},{"id":"b03f6bf4-3ad9-4f05-9207-a959f1dabb5f","type":"paragraph","props":{"textColor":"default","backgroundColor":"default","textAlignment":"left"},"content":[{"type":"text","text":"[Sender Company]","styles":{}}],"children":[]},{"id":"58cef5d8-6124-4c0d-bb13-ffae61ea3eec","type":"paragraph","props":{"textColor":"default","backgroundColor":"default","textAlignment":"left"},"content":[{"type":"text","text":"Signature","styles":{}}],"children":[]},{"id":"013d4c29-6f5e-40b9-9ee6-6bb08697b3b3","type":"paragraph","props":{"textColor":"default","backgroundColor":"default","textAlignment":"left"},"content":[{"type":"text","text":"[Sender First Name] [Sender Last Name]","styles":{}}],"children":[]},{"id":"f8fb6d1a-2092-4d2b-981a-b86fc324b2a8","type":"paragraph","props":{"textColor":"default","backgroundColor":"default","textAlignment":"left"},"content":[],"children":[]}]`,
  },
];

interface TemplatesDialogProps {
  children: React.ReactNode;
}

const TemplatesDialog = ({ children }: TemplatesDialogProps) => {
  const templateDialog = useTemplateDialog();
  const sidebarSheet = useSidebarSheet();

  const create = useMutation(api.documents.createDocument);
  const removeTemplate = useMutation(api.templates.removeTemplate);
  const userTemplates = useQuery(api.templates.getUserTemplates);
  const router = useRouter();

  const onCreate = (
    event: React.MouseEvent<HTMLButtonElement, MouseEvent>,
    name?: string,
    content?: string,
  ) => {
    event.stopPropagation();
    // console.log(content);
    const promise = create({ template: name, content }).then((documentId) => {
      templateDialog.onClose();
      router.push(`/documents/${documentId}`);
    });

    toast.promise(promise, {
      loading: "Creating a new document...",
      success: "New document created!",
      error: "Failed to create a new document.",
    });
  };

  const onRemove = (event: React.MouseEvent<HTMLButtonElement, MouseEvent>, template: string) => {
    event.stopPropagation();
    const promise = removeTemplate({ name: template });

    toast.promise(promise, {
      loading: "Removing template...",
      success: "Template removed!",
      error: "Failed to remove template.",
    });
  };

  return (
    <Dialog open={templateDialog.isOpen} onOpenChange={templateDialog.onToggle}>
      <DialogTrigger asChild>{children}</DialogTrigger>
      <DialogContent
        className="p-4 md:p-8"
        onOpenAutoFocus={(e) => {
          e.preventDefault();
        }}
        onCloseAutoFocus={(e) => {
          e.preventDefault();
        }}
      >
        <header className="space-y-2 pb-3">
          <h3 className="text-display-xs/display-xs md:text-display-sm/display-sm font-semibold tracking-tight text-gray-900 dark:text-gray-50">
            Choose a template
          </h3>
          <p className="text-md/md md:text-sm/sm text-gray-600 dark:text-gray-400">
            Choose one of the existing templates or create a blank document.
          </p>
        </header>

        {defaultTemplates?.length ? (
          <ScrollArea className="w-full">
            <div className="flex gap-4">
              {defaultTemplates.map((template) => (
                <TemplateItem
                  key={template.name}
                  name={template.name}
                  icon={template.icon}
                  content={template.content}
                  onClick={onCreate}
                />
              ))}
              <ScrollBar orientation="horizontal" />
            </div>
          </ScrollArea>
        ) : (
          <p className="text-lg/lg md:text-md/md text-gray-300 dark:text-gray-700 font-medium">
            No templates found.
          </p>
        )}
        {!defaultTemplates && (
          <div className="flex gap-4 overflow-hidden">
            <TemplateItem.Skeleton />
            <TemplateItem.Skeleton />
            <TemplateItem.Skeleton />
            <TemplateItem.Skeleton />
            <TemplateItem.Skeleton />
          </div>
        )}
        <h4 className="text-lg/lg md:text-xl/xl font-semibold text-gray-900 dark:text-gray-50">
          Your templates
        </h4>
        {userTemplates?.length ? (
          <ScrollArea className="w-full">
            <div className="flex gap-4">
              {userTemplates.map((template) => (
                <TemplateItem
                  key={template.name}
                  name={template.name}
                  icon={template.icon}
                  onClick={onCreate}
                  onRemove={onRemove}
                />
              ))}
            </div>
            <ScrollBar orientation="horizontal" />
          </ScrollArea>
        ) : (
          <p className="text-lg/lg md:text-md/md text-gray-300 dark:text-gray-700 font-medium">
            No templates found.
          </p>
        )}
        {!userTemplates && (
          <div className="flex gap-4 overflow-hidden">
            <TemplateItem.Skeleton />
            <TemplateItem.Skeleton />
            <TemplateItem.Skeleton />
            <TemplateItem.Skeleton />
            <TemplateItem.Skeleton />
          </div>
        )}
      </DialogContent>
    </Dialog>
  );
};

export { TemplatesDialog };
